syntax = "proto3";
package authors.v1;

import "google/protobuf/empty.proto";
import "postgrpc/api/annotations.proto";

service Authors {
  rpc GetAuthors (google.protobuf.Empty) returns (stream Author) {
    option (postgrpc.query) = {
      file: "./bookstore/get_authors.sql"
    };
  }

  rpc CreateAuthor (CreateAuthorRequest) returns (stream Author) {
    option (postgrpc.query) = {
      file: "./bookstore/create_author.sql"
    };
  }
}

message CreateAuthorRequest {
  string first_name = 1;
  string last_name = 2;
}

message Author {
  int32 id = 1;
  string first_name = 2;
  string last_name = 3;
}
